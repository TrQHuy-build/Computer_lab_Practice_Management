@model ChiTietHocKyViewModel
@{
    ViewData["Title"] = "Chi tiết học kỳ";
    var tienHK = Model.HocKy.TienHocKy;
    var batDau = Model.HocKy.BatDauHocKy;
    var ketThuc = Model.HocKy.KetThucHocKy;
    var batDauThi = ketThuc.AddDays(-21);
}

<div class="card mb-4">
    <div class="card-header">
        <i class="bi bi-calendar-event me-2"></i>Thông tin học kỳ
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <table class="table table-borderless">
                    <tr>
                        <th width="150">Tên học kỳ:</th>
                        <td><strong>@Model.HocKy.TenHocKy</strong></td>
                    </tr>
                    <tr>
                        <th>Năm học:</th>
                        <td>@Model.HocKy.NamHoc</td>
                    </tr>
                    <tr>
                        <th>Ngày bắt đầu:</th>
                        <td>@batDau.ToString("dd/MM/yyyy")</td>
                    </tr>
                    <tr>
                        <th>Ngày kết thúc:</th>
                        <td>@ketThuc.ToString("dd/MM/yyyy")</td>
                    </tr>
                    <tr>
                        <th>Giai đoạn:</th>
                        <td><span class="badge bg-primary">@Model.TenGiaiDoan</span></td>
                    </tr>
                    <tr>
                        <th>Trạng thái:</th>
                        <td>
                            @if (Model.HocKy.TrangThai == 1)
                            {
                                <span class="badge bg-success">Đang hoạt động</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">Không hoạt động</span>
                            }
                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-md-6">
                <div class="card bg-light">
                    <div class="card-body">
                        <h6 class="card-title">Thống kê</h6>
                        <ul class="list-unstyled mb-0">
                            <li class="mb-2">
                                <i class="bi bi-file-earmark-text me-2 text-primary"></i>
                                <strong>Tổng hợp đồng:</strong> @Model.TongHopDong
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-calendar-plus me-2 text-info"></i>
                                <strong>Đăng ký lịch:</strong> @Model.TongDangKyLich
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-calendar-week me-2 text-success"></i>
                                <strong>Lịch thực hành:</strong> @Model.TongLichThucHanh
                            </li>
                            <li>
                                <i class="bi bi-check-circle me-2 text-success"></i>
                                <strong>Đã duyệt:</strong> @Model.LichDaDuyet
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        <i class="bi bi-clock-history me-2"></i>Chi tiết các giai đoạn
    </div>
    <div class="card-body p-0">
        <table class="table table-striped mb-0">
            <thead class="table-light">
                <tr>
                    <th>Giai đoạn</th>
                    <th>Từ ngày</th>
                    <th>Đến ngày</th>
                    <th>Công việc</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Tuần 1: Nhập hợp đồng</strong></td>
                    <td>@tienHK.ToString("dd/MM/yyyy")</td>
                    <td>@tienHK.AddDays(6).ToString("dd/MM/yyyy")</td>
                    <td>PDT nhập hợp đồng giảng dạy</td>
                </tr>
                <tr>
                    <td><strong>Tuần 2: Đăng ký lịch</strong></td>
                    <td>@tienHK.AddDays(7).ToString("dd/MM/yyyy")</td>
                    <td>@tienHK.AddDays(13).ToString("dd/MM/yyyy")</td>
                    <td>GV thỉnh giảng đăng ký lịch mong muốn</td>
                </tr>
                <tr>
                    <td><strong>Tuần 3: Sắp xếp lịch</strong></td>
                    <td>@tienHK.AddDays(14).ToString("dd/MM/yyyy")</td>
                    <td>@tienHK.AddDays(20).ToString("dd/MM/yyyy")</td>
                    <td>PDT sắp xếp lịch, TT ĐTTH duyệt</td>
                </tr>
                <tr>
                    <td><strong>Tuần 4: Hoàn tất</strong></td>
                    <td>@tienHK.AddDays(21).ToString("dd/MM/yyyy")</td>
                    <td>@batDau.AddDays(-1).ToString("dd/MM/yyyy")</td>
                    <td>Xử lý yêu cầu mượn/bù, đổi phòng</td>
                </tr>
                <tr class="table-success">
                    <td><strong>Học kỳ diễn ra</strong></td>
                    <td>@batDau.ToString("dd/MM/yyyy")</td>
                    <td>@batDauThi.AddDays(-1).ToString("dd/MM/yyyy")</td>
                    <td>Thực hiện lịch, xử lý yêu cầu</td>
                </tr>
                <tr class="table-warning">
                    <td><strong>Giai đoạn thi</strong></td>
                    <td>@batDauThi.ToString("dd/MM/yyyy")</td>
                    <td>@ketThuc.ToString("dd/MM/yyyy")</td>
                    <td>Không có thực hành (3 tuần cuối)</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="d-flex justify-content-between">
    <a href="/QuanLyHocKy" class="btn btn-secondary">
        <i class="bi bi-arrow-left me-1"></i>Quay lại
    </a>
    <div>
        <a href="/QuanLyHocKy/Sua/@Model.HocKy.Id" class="btn btn-primary">
            <i class="bi bi-pencil me-1"></i>Chỉnh sửa
        </a>
    </div>
</div>